{% extends 'base.html.twig' %}

{% block title %}User Profile{% endblock %}

{% block body %}
{# <div class="bg-gradient-to-r from-[#D6D6D6] to-[#F9EFD4]">
    <div>
    {{include('micro_post/_menu.html.twig')}}
    </div>
    <div class="grid lg:grid-cols-5 lg:gap-10 md:grid-cols-1 min-[320px]:grid-cols-1 max-[1250px]:grid-cols-1">
    <div class="col-span-2">
        <span class="flex flex-col md:flex-row lg:flex-row">
           <img class="lg:relative lg:top-[-33px] lg:left-32 w-40 h-40 border-[5px] rounded-full drop-shadow-lg " src="{{ asset('assets/images/2.jpg') }}" alt="user photo">
           <div class="lg:relative lg:left-36 lg:top-5">
                <h1 class="text-2xl font-semibold">{{user.userProfile.name ?? user.email }}</h1>
                <span class="flex my-3 text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-1">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z" />
                    <p class="text-base">{{user.userProfile.profession ?? 'No Profession'}}</p>
                    </svg>
                </span>
                <span class="flex text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z" />
                    </svg>
                    <p class="text-sm"> {{user.userProfile.dateOfBirth|date('d/m/y')}}</p>
                </span>

                <div class="flex my-10">
                    <button class="bg-[#2386E1] rounded-bl-lg px-7 py-2 cursor-pointer">Follow</button>
                    <button class="rounded-br-lg bg-[#C6AE34]  px-5 py-2 cursor-pointer">Message</button>
                </div>
           </div> 
           
        </span>

    </div>

    <div class="col-span-3">
        <div class="grid grid-cols-7">
            <div class="col-span-6 border rounded-tr-lg bg-[#f97316] py-2">The Posts</div>
            <div class="col-span-6 border max-h-full">
                <div class="grid grid-cols-2 gap-3 border-blue-500">
                    <div class="col-span-1 flex items-center">
                        <img class="object-cover" src="{{ asset('assets/images/1.jpg') }}" alt="user photo">
                    </div>
                    <div class="col-start-2 col-span-1">
                        <span>
                            <p class="text-gray-600">Title</p>
                            <div Class="w-4/5 border rounded-lg bg-white py-4"></div>
                        </span>
                        <span>
                            <p class="text-gray-600">Text</p>
                            <div Class="w-4/5 border rounded-lg bg-white py-10"></div>
                        </span>
                        <span>
                            <p class="text-gray-600">Created at</p>
                            <div Class="w-4/5 border rounded-lg bg-white py-4"></div>
                        </span>
                    </div>
                </div>
            </div>
        
        </div>
    </div>
 
    </div>
</div> #}
    

















<div class="min-h-screen bg-gradient-to-r from-[#D6D6D6] to-[#F9EFD4]">
    <div>
    {{include('micro_post/_menu.html.twig')}}
    </div>
    <div class="flex flex-col mx-0 md:mx-15 xl:mx-20 ">
        {{include('profile/_profile_header.html.twig')}}
        {{include('profile/_profile_tabs.html.twig')}}
        <div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-2 gap-y-10 gap-x-7 mt-10 mx-5 ">
                {% if user.posts is not empty %}
                {% for post in user.posts %}
                
                <div class="">
                    <div>
                        <div class="flex flex-col items-center border border-gray-200 rounded-lg shadow md:flex-row md:max-w-xl hover:bg-gray-100 h-48">
                            {# <img class="object-cover w-full h-full rounded-t-lg  md:h-auto md:w-48 md:rounded-none md:rounded-s-lg" src="{{ asset('assets/images/1.jpg') }}" alt=""> #}
                            {{ include('shared/_post_image.html.twig',{ hsize:40 , wsize:40})}}
                            <div class="flex flex-col justify-between p-4 leading-normal overflow-y-auto max-h-40">
                                <h5 class="mb-2 text-xl font-bold tracking-tight text-gray-900">{{post.title}}</h5>
                                <p class="mb-3 text-sm text-gray-700 ">{{post.createdAt | date('d/m/y') }}</p>
                                <p class="mb-3 text-lg font-normal text-gray-700 ">{{post.text}}</p>    
                            </div>
                        </div>

                        <div class="flex justify-between mt-3 mx-2 border-b border-gray-400 border-t border-gray-400">
                            <div class="flex mx-3 my-3">
                            {% if post.likedBy.contains(app.user) %}  
                                <span class="flex mr-3">
                                    <a href="{{path('app_unlike', {id:post.id})}}">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                            <path d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" />
                                        </svg>
                                    </a>  
                                    <p>{{post.likedBy.count}}</p>
                                </span> 

                                
                            {% else %}
                                <span class="flex mr-3">
                                    <a href="{{path('app_like', {id:post.id})}}">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                                        </svg>
                                    </a>
                                    <p>{{post.likedBy.count}}</p>
                                </span>      
                            {% endif %}
                                <span class="flex">
                                    <a href="{{path('app_micro_post_comment', {id:post.id})}}"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z" />
                                    </svg></a>
                                    <p>{{post.comments.count}}</p>
                                </span>


                            </div>
                            <div class="flex mx-3 my-3">
                                {% if post.author.email == app.user.email %}
                                <a href="{{path('app_micro_post_edit',{id: post.id})}}"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-3">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                                </svg></a>
                                <a href=#><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                                </svg></a>
                                {% endif %}
                            </div>
                            
                        </div>
                    </div>
                    <div class="overflow-y-auto max-h-24 mt-3">
                    {% if post.comments| length > 0 %}
                    {% for comment in post.comments %}
                        <div class="mt-8 mx-5 max-h-20">
                        
                            <div class="mb-4">
                                <div class="flex justify-between items-center ">
                                    <div class="ml-2 mr-3">
                                        <div class="flex items-center">
                                            {# <div class="inline-block bg-gray-200 rounded-full text-3xl w-8 h-8 ring-2 mr-2">
                                            </div> #}
                                            {{ include('shared/_avatar.html.twig',{profile: comment.author.userProfile, size:8})}}
                                            <div>
                                                <div class="font-medium text-gray-800">{{comment.author.email}}</div>
                                                <div class="font-light text-gray-500">{{comment.createdAt| date("M j,Y")}}</div>
                                            </div>
                                        </div>
                                        <div class="flex">
                                            <div class="border border-gray-400 ml-4 mr-6 pb-12"></div>
                                            <div>{{comment.text}}</div>
                                        </div>
                                    </div>
                                    <div class="flex">
                                        {% if comment.author.email == app.user.email %}
                                        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                                        </svg></a>
                                        {% endif %}
                                        {% if comment.author.email == app.user.email or app.user.email == user.email %}
                                        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                                        </svg></a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div> 
                            
                        </div>
                    {% endfor %}
                    {% else %}
                    <p class="text-center text-lg font-medium">There isn't any comment yet</p>
                    {% endif %}
                    </div>
                </div>
                {% endfor %}  

                {% else %}
                <h1>You haven't shared any posts yet. Start <a href="{{path('app_micro_post_add')}}"> <span class="underline decoration-solid">publishing</span> </a> your first post!</h1>
                {% endif %}
                
                
            </div>
        </div>

    </div>
</div>


    {# <div class="header_wrapper">   
    <div class="cols_container">
        <div class="left_col">
            <div class="bio-information">
                <div class="img_container">
                    <img src="{{ asset('assets/images/1.jpg') }}" alt="profile image">
                </div>
                <div class="text-container">
                
                    <h2>{{user.userProfile.name ?? user.email }}</h2>
                {% if user.userProfile != null %}
                    <p>Profession: {{user.userProfile.profession}}</p>
                    <p>Date of Birth: {{user.userProfile.dateOfBirth|date('d/m/y')}}</p>
                {% endif %}    
                </div>
            </div>
            
            
            <ul class="about">
                <li><span>5</span>post</li> 
                <li><span>5</span>followers</li>
                <li><span>5</span>following</li>
                   
            </ul>
            <div class="content">
            {% if user.userProfile != null %}
                <p>
                   {{user.userProfile.bio}}
                </p>
            {% endif %}
            </div>    
        </div>

        <div class="right_col">
            <nav>
                <div class="flex">
                    <button class="mr-3">Follow</button>
                    <button>Message</button>
                </div>
            </nav>
            
            <div class="photos">
            {{ include('micro_post/_post.html.twig', { 'posts': user.posts }) }}  
            </div>
        </div>
    </div> 
</div> #}
   
{% endblock %}
